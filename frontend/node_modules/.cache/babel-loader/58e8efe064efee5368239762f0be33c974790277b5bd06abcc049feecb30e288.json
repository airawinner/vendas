{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vitor Mendes\\\\Desktop\\\\Vitor Mendes\\\\CEFET\\\\BD\\\\sistemaBD\\\\vendas\\\\frontend\\\\src\\\\components\\\\ViewPurchaseDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../style/viewpurchasedetails.css'; // Novo arquivo de estilo\nimport { viewPurchaseDetails } from '../API'; // Importando a função de remoção\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ViewPurchaseDetails = ({\n  userData\n}) => {\n  _s();\n  const [purchases, setPurchases] = useState([]); // Estado para armazenar as compras\n  const [loading, setLoading] = useState(true); // Estado para controlar o carregamento\n  const [error, setError] = useState(null); // Estado para capturar erros\n\n  const fetchPurchases = async () => {\n    try {\n      const response = await viewPurchaseDetails(userData.id); // Chama a função de API para buscar as compras\n      setPurchases(response); // Atualiza o estado com as compras\n    } catch (err) {\n      setError('Erro ao carregar as compras');\n    } finally {\n      setLoading(false); // Finaliza o carregamento\n    }\n  };\n  useEffect(() => {\n    fetchPurchases(); // Carrega as compras ao montar o componente\n  }, []); // Executa apenas uma vez quando o componente é montado\n\n  const handlePurchase = async purchaseData => {\n    try {\n      // Aqui você faz a chamada para registrar a compra\n      const response = await fetch('http://localhost:3000/purchases', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(purchaseData)\n      });\n      const result = await response.json();\n      if (result.success) {\n        // Atualiza as compras após realizar a compra\n        setPurchases(result.purchases);\n      } else {\n        alert(result.message);\n      }\n    } catch (err) {\n      alert('Erro ao realizar a compra');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 12\n    }, this);\n  }\n  const formatPrice = price => {\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(price);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"purchase-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Detalhes das Compras\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), purchases.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Nenhuma compra encontrada.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"purchases-list\",\n      children: purchases.map(purchase => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"purchase-card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"purchase-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: purchase.titulo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: purchase.descricao\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Pre\\xE7o:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"purchase-price\",\n              children: formatPrice(purchase.preco)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"purchase-date\",\n            children: purchase.data_compra\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)\n      }, purchase.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"back-btn\",\n      onClick: () => window.history.back(),\n      children: \"Voltar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(ViewPurchaseDetails, \"qpb/LXiD3Eo329a9Xmsc5gK8iB4=\");\n_c = ViewPurchaseDetails;\nexport default ViewPurchaseDetails;\nvar _c;\n$RefreshReg$(_c, \"ViewPurchaseDetails\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","viewPurchaseDetails","jsxDEV","_jsxDEV","ViewPurchaseDetails","userData","_s","purchases","setPurchases","loading","setLoading","error","setError","fetchPurchases","response","id","err","handlePurchase","purchaseData","fetch","method","headers","body","JSON","stringify","result","json","success","alert","message","children","fileName","_jsxFileName","lineNumber","columnNumber","formatPrice","price","Intl","NumberFormat","style","currency","format","className","length","map","purchase","titulo","descricao","preco","data_compra","onClick","window","history","back","_c","$RefreshReg$"],"sources":["C:/Users/Vitor Mendes/Desktop/Vitor Mendes/CEFET/BD/sistemaBD/vendas/frontend/src/components/ViewPurchaseDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../style/viewpurchasedetails.css'; // Novo arquivo de estilo\nimport { viewPurchaseDetails } from '../API'; // Importando a função de remoção\n\nconst ViewPurchaseDetails = ({userData}) => {\n  const [purchases, setPurchases] = useState([]); // Estado para armazenar as compras\n  const [loading, setLoading] = useState(true); // Estado para controlar o carregamento\n  const [error, setError] = useState(null); // Estado para capturar erros\n\n  const fetchPurchases = async () => {\n    try {\n      const response = await viewPurchaseDetails(userData.id); // Chama a função de API para buscar as compras\n      setPurchases(response); // Atualiza o estado com as compras\n    } catch (err) {\n      setError('Erro ao carregar as compras');\n    } finally {\n      setLoading(false); // Finaliza o carregamento\n    }\n  };\n\n  useEffect(() => {\n    fetchPurchases(); // Carrega as compras ao montar o componente\n  }, []); // Executa apenas uma vez quando o componente é montado\n\n  const handlePurchase = async (purchaseData) => {\n    try {\n      // Aqui você faz a chamada para registrar a compra\n      const response = await fetch('http://localhost:3000/purchases', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(purchaseData),\n      });\n\n      const result = await response.json();\n      \n      if (result.success) {\n        // Atualiza as compras após realizar a compra\n        setPurchases(result.purchases);\n      } else {\n        alert(result.message);\n      }\n    } catch (err) {\n      alert('Erro ao realizar a compra');\n    }\n  };\n\n  if (loading) {\n    return <p>Carregando...</p>;\n  }\n\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(price);\n  };\n\n  return (\n    <div className=\"purchase-container\">\n      <h1>Detalhes das Compras</h1>\n      {purchases.length === 0 ? (\n        <p>Nenhuma compra encontrada.</p>\n      ) : (\n        <div className=\"purchases-list\">\n          {purchases.map((purchase) => (\n            <div key={purchase.id} className=\"purchase-card\">\n              <div className=\"purchase-details\">\n                <h2>{purchase.titulo}</h2>\n                <p>{purchase.descricao}</p>\n                <div className=\"price-row\">\n                  <span>Preço:</span>\n                  <span className=\"purchase-price\">{formatPrice(purchase.preco)}</span>\n                </div>\n                <p className=\"purchase-date\">{purchase.data_compra}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      <button className=\"back-btn\" onClick={() => window.history.back()}>\n        Voltar\n      </button>\n    </div>\n  );\n};\n\nexport default ViewPurchaseDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}